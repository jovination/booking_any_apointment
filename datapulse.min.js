"use strict";(()=>{function l(t){let e=document.querySelector(t);if(!e)throw`DataPulse script ${t} tag not found!`;return e}function d(t){return A(t)||!m(t)||v(t)}function p(t){return t?t=location.href.replace(location.hostname,t):t=location.href,t}function f(t){let e=document.referrer;return t&&(e=e.replace(location.hostname,t)),e}function A(t){return!t.hasAttribute("data-dev")&&(/^localhost(.*)$|^127(\.[0-9]{1,3}){3}$/is.test(location.hostname)||location.protocol==="file:")?(console.info("DataPulse is ignored on localhost. Add the data-dev attribute to enable it."),!0):!1}function m(t){try{let e=t.getAttribute("data-include"),o=e?e.split(","):[];if(o.length){let n=!1;for(let i=0;i<o.length;i++)if(new RegExp(o[i]).test(location.pathname)){n=!0;break}if(!n)return!1}}catch(e){console.error(e)}return!0}function v(t){try{let e=t.getAttribute("data-exclude"),o=e?e.split(","):[];for(let n=0;n<o.length;n++)if(new RegExp(o[n]).test(location.pathname))return!0}catch(e){console.error(e)}return!1}(function(){"use strict";let t=l("#datapulse");if(d(t))return;let e=t.getAttribute("data-endpoint")||"https://datapulse.app/api/v1/event",o=t.getAttribute("data-workspace"),n=t.getAttribute("data-domain")?t.getAttribute("data-domain").split(",")||[]:[],i=t.hasAttribute("data-disable-query"),g=t.hasAttribute("data-disable-referrer"),s=t.hasAttribute("data-disable-resolution"),h=t.getAttribute("data-dev");function a(){c(h);for(let r=0;r<n.length;r++)c(n[r])}function c(r){let b=f(r);r=p(r),i&&(r=r.includes("?")?r.split("?")[0]:r);let w=e+"?ti="+new Date().getTime()+"&wo="+o+"&n=pageview&u="+encodeURIComponent(r.substring(0,1800))+"&t="+encodeURIComponent(document.title)+"&r="+(g?"":encodeURIComponent(b))+"&w="+(s?"":screen.width)+"&h="+(s?"":screen.height),u=new XMLHttpRequest;u.open("GET",w),u.send()}if(history.pushState){let r=history.pushState;history.pushState=function(){r.apply(this,arguments),a()},window.addEventListener("popstate",a)}document.body?a():window.addEventListener("DOMContentLoaded",a)})();})();
